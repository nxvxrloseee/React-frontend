import { useState, useEffect } from 'react';
import { usePermissions } from '../hooks/usePermissions';
import { useAuth } from '../context/AuthContext';

const Settings = () => {
    const { isAdmin } = usePermissions();
    const { user } = useAuth();
    
    const [activeTab, setActiveTab] = useState('general');
    const [saving, setSaving] = useState(false);
    const [savedMsg, setSavedMsg] = useState('');
    
    // –ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–∏—Å—Ç–µ–º—ã
    const [generalSettings, setGeneralSettings] = useState({
        companyName: '–§–∏—Ç–Ω–µ—Å-–õ–∞–π—Ñ',
        address: '–≥. –ú–æ—Å–∫–≤–∞, —É–ª. –ü—Ä–∏–º–µ—Ä–Ω–∞—è, –¥. 123',
        phone: '+7 (495) 123-45-67',
        email: 'info@fitness-life.ru',
        workingHours: '06:00 - 23:00',
        timezone: 'Europe/Moscow',
    });
    
    // –ù–∞—Å—Ç—Ä–æ–π–∫–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
    const [notificationSettings, setNotificationSettings] = useState({
        emailNotifications: true,
        smsNotifications: false,
        membershipExpireReminder: 7, // –¥–Ω–µ–π –¥–æ –∏—Å—Ç–µ—á–µ–Ω–∏—è
        trainingReminder: 24, // —á–∞—Å–æ–≤ –¥–æ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏
        paymentReminder: true,
    });
    
    // –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
    const [securitySettings, setSecuritySettings] = useState({
        sessionTimeout: 30, // –º–∏–Ω—É—Ç
        twoFactorAuth: false,
        passwordMinLength: 8,
        requireSpecialChars: true,
        loginAttempts: 5,
    });
    
    // –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –æ—Ç—á—ë—Ç–æ–≤
    const [reportSettings, setReportSettings] = useState({
        defaultReportFormat: 'pdf',
        autoGenerateDaily: false,
        autoGenerateWeekly: true,
        autoGenerateMonthly: true,
        includeCharts: true,
    });

    // –¢–∏–ø—ã –∑–∞–Ω—è—Ç–∏–π (—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–µ–º—ã–µ)
    const [trainingTypes, setTrainingTypes] = useState([
        { id: 'yoga', name: '–ô–æ–≥–∞', color: '#9b59b6', active: true },
        { id: 'power', name: '–°–∏–ª–æ–≤–∞—è', color: '#e74c3c', active: true },
        { id: 'cardio', name: '–ö–∞—Ä–¥–∏–æ', color: '#3498db', active: true },
        { id: 'personal', name: '–ü–µ—Ä—Å–æ–Ω–∞–ª—å–Ω–∞—è', color: '#27ae60', active: true },
        { id: 'group', name: '–ì—Ä—É–ø–ø–æ–≤–∞—è', color: '#f39c12', active: true },
        { id: 'swimming', name: '–ü–ª–∞–≤–∞–Ω–∏–µ', color: '#1abc9c', active: true },
    ]);
    const [newType, setNewType] = useState({ name: '', color: '#4169E1' });

    const handleSave = async () => {
        setSaving(true);
        // –ò–º–∏—Ç–∞—Ü–∏—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è
        await new Promise(resolve => setTimeout(resolve, 1000));
        setSaving(false);
        setSavedMsg('–ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã!');
        setTimeout(() => setSavedMsg(''), 3000);
    };

    const addTrainingType = () => {
        if (!newType.name.trim()) return;
        setTrainingTypes([
            ...trainingTypes,
            { id: `custom_${Date.now()}`, ...newType, active: true }
        ]);
        setNewType({ name: '', color: '#4169E1' });
    };

    const toggleTypeActive = (id) => {
        setTrainingTypes(trainingTypes.map(t => 
            t.id === id ? { ...t, active: !t.active } : t
        ));
    };

    const deleteType = (id) => {
        if (!confirm('–£–¥–∞–ª–∏—Ç—å —Ç–∏–ø –∑–∞–Ω—è—Ç–∏—è?')) return;
        setTrainingTypes(trainingTypes.filter(t => t.id !== id));
    };

    const tabs = [
        { id: 'general', icon: 'üè¢', label: '–û–±—â–∏–µ' },
        { id: 'notifications', icon: 'üîî', label: '–£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è' },
        { id: 'training-types', icon: 'üèãÔ∏è', label: '–¢–∏–ø—ã –∑–∞–Ω—è—Ç–∏–π' },
        { id: 'security', icon: 'üîí', label: '–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å' },
        { id: 'reports', icon: 'üìä', label: '–û—Ç—á—ë—Ç—ã' },
        { id: 'backup', icon: 'üíæ', label: '–†–µ–∑–µ—Ä–≤–Ω—ã–µ –∫–æ–ø–∏–∏' },
    ];

    if (!isAdmin) {
        return (
            <div style={styles.accessDenied}>
                <div style={styles.accessIcon}>üîí</div>
                <h2>–î–æ—Å—Ç—É–ø –∑–∞–ø—Ä–µ—â—ë–Ω</h2>
                <p>–¢–æ–ª—å–∫–æ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä –º–æ–∂–µ—Ç –∏–∑–º–µ–Ω—è—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–∏—Å—Ç–µ–º—ã</p>
            </div>
        );
    }

    return (
        <div style={styles.container}>
            {/* –ó–∞–≥–æ–ª–æ–≤–æ–∫ */}
            <div style={styles.header}>
                <div>
                    <h1 style={styles.title}>–ù–∞—Å—Ç—Ä–æ–π–∫–∏</h1>
                    <p style={styles.subtitle}>
                        –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —Å–∏—Å—Ç–µ–º—ã –§–∏—Ç–Ω–µ—Å-–ú–µ–Ω–µ–¥–∂–µ—Ä
                    </p>
                </div>
                <button 
                    className="btn btn-primary"
                    onClick={handleSave}
                    disabled={saving}
                >
                    {saving ? '‚è≥ –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ...' : 'üíæ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –≤—Å–µ'}
                </button>
            </div>

            {savedMsg && (
                <div className="alert alert-success" style={{marginBottom: '20px'}}>
                    ‚úÖ {savedMsg}
                </div>
            )}

            <div style={styles.layout}>
                {/* –ë–æ–∫–æ–≤–æ–µ –º–µ–Ω—é */}
                <div style={styles.sidebar}>
                    {tabs.map(tab => (
                        <button
                            key={tab.id}
                            style={{
                                ...styles.tabBtn,
                                backgroundColor: activeTab === tab.id ? '#4169E1' : 'transparent',
                                color: activeTab === tab.id ? 'white' : '#2c3e50',
                            }}
                            onClick={() => setActiveTab(tab.id)}
                        >
                            <span style={styles.tabIcon}>{tab.icon}</span>
                            {tab.label}
                        </button>
                    ))}
                </div>

                {/* –ö–æ–Ω—Ç–µ–Ω—Ç */}
                <div style={styles.content}>
                    {/* –û–±—â–∏–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ */}
                    {activeTab === 'general' && (
                        <div className="card">
                            <h2 style={styles.sectionTitle}>üè¢ –û–±—â–∏–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏</h2>
                            <p style={styles.sectionDesc}>–û—Å–Ω–æ–≤–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Ñ–∏—Ç–Ω–µ—Å-—Ü–µ–Ω—Ç—Ä–µ</p>
                            
                            <div className="form-label">–ù–∞–∑–≤–∞–Ω–∏–µ –∫–æ–º–ø–∞–Ω–∏–∏</div>
                            <input
                                className="form-input"
                                value={generalSettings.companyName}
                                onChange={e => setGeneralSettings({...generalSettings, companyName: e.target.value})}
                            />

                            <div className="form-label">–ê–¥—Ä–µ—Å</div>
                            <input
                                className="form-input"
                                value={generalSettings.address}
                                onChange={e => setGeneralSettings({...generalSettings, address: e.target.value})}
                            />

                            <div style={styles.formRow}>
                                <div style={{flex: 1}}>
                                    <div className="form-label">–¢–µ–ª–µ—Ñ–æ–Ω</div>
                                    <input
                                        className="form-input"
                                        value={generalSettings.phone}
                                        onChange={e => setGeneralSettings({...generalSettings, phone: e.target.value})}
                                    />
                                </div>
                                <div style={{flex: 1}}>
                                    <div className="form-label">Email</div>
                                    <input
                                        className="form-input"
                                        type="email"
                                        value={generalSettings.email}
                                        onChange={e => setGeneralSettings({...generalSettings, email: e.target.value})}
                                    />
                                </div>
                            </div>

                            <div style={styles.formRow}>
                                <div style={{flex: 1}}>
                                    <div className="form-label">–ß–∞—Å—ã —Ä–∞–±–æ—Ç—ã</div>
                                    <input
                                        className="form-input"
                                        value={generalSettings.workingHours}
                                        onChange={e => setGeneralSettings({...generalSettings, workingHours: e.target.value})}
                                    />
                                </div>
                                <div style={{flex: 1}}>
                                    <div className="form-label">–ß–∞—Å–æ–≤–æ–π –ø–æ—è—Å</div>
                                    <select
                                        className="form-select"
                                        value={generalSettings.timezone}
                                        onChange={e => setGeneralSettings({...generalSettings, timezone: e.target.value})}
                                    >
                                        <option value="Europe/Moscow">–ú–æ—Å–∫–≤–∞ (UTC+3)</option>
                                        <option value="Europe/Samara">–°–∞–º–∞—Ä–∞ (UTC+4)</option>
                                        <option value="Asia/Yekaterinburg">–ï–∫–∞—Ç–µ—Ä–∏–Ω–±—É—Ä–≥ (UTC+5)</option>
                                        <option value="Asia/Novosibirsk">–ù–æ–≤–æ—Å–∏–±–∏—Ä—Å–∫ (UTC+7)</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                    )}

                    {/* –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è */}
                    {activeTab === 'notifications' && (
                        <div className="card">
                            <h2 style={styles.sectionTitle}>üîî –ù–∞—Å—Ç—Ä–æ–π–∫–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π</h2>
                            <p style={styles.sectionDesc}>–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ–ø–æ–≤–µ—â–µ–Ω–∏—è–º–∏ –¥–ª—è –∫–ª–∏–µ–Ω—Ç–æ–≤ –∏ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤</p>
                            
                            <div style={styles.settingRow}>
                                <div>
                                    <div style={styles.settingLabel}>Email-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è</div>
                                    <div style={styles.settingDesc}>–û—Ç–ø—Ä–∞–≤–∫–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –Ω–∞ email –∫–ª–∏–µ–Ω—Ç–æ–≤</div>
                                </div>
                                <label style={styles.toggle}>
                                    <input
                                        type="checkbox"
                                        checked={notificationSettings.emailNotifications}
                                        onChange={e => setNotificationSettings({...notificationSettings, emailNotifications: e.target.checked})}
                                    />
                                    <span style={styles.toggleSlider}></span>
                                </label>
                            </div>

                            <div style={styles.settingRow}>
                                <div>
                                    <div style={styles.settingLabel}>SMS-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è</div>
                                    <div style={styles.settingDesc}>–û—Ç–ø—Ä–∞–≤–∫–∞ SMS –Ω–∞ —Ç–µ–ª–µ—Ñ–æ–Ω (–ø–ª–∞—Ç–Ω–∞—è —É—Å–ª—É–≥–∞)</div>
                                </div>
                                <label style={styles.toggle}>
                                    <input
                                        type="checkbox"
                                        checked={notificationSettings.smsNotifications}
                                        onChange={e => setNotificationSettings({...notificationSettings, smsNotifications: e.target.checked})}
                                    />
                                    <span style={styles.toggleSlider}></span>
                                </label>
                            </div>

                            <div style={styles.settingRow}>
                                <div>
                                    <div style={styles.settingLabel}>–ù–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ –æ–± –∏—Å—Ç–µ—á–µ–Ω–∏–∏ –∞–±–æ–Ω–µ–º–µ–Ω—Ç–∞</div>
                                    <div style={styles.settingDesc}>–ó–∞ —Å–∫–æ–ª—å–∫–æ –¥–Ω–µ–π —É–≤–µ–¥–æ–º–ª—è—Ç—å –∫–ª–∏–µ–Ω—Ç–∞</div>
                                </div>
                                <select
                                    className="form-select"
                                    style={{width: '120px', marginBottom: 0}}
                                    value={notificationSettings.membershipExpireReminder}
                                    onChange={e => setNotificationSettings({...notificationSettings, membershipExpireReminder: parseInt(e.target.value)})}
                                >
                                    <option value="3">3 –¥–Ω—è</option>
                                    <option value="7">7 –¥–Ω–µ–π</option>
                                    <option value="14">14 –¥–Ω–µ–π</option>
                                    <option value="30">30 –¥–Ω–µ–π</option>
                                </select>
                            </div>

                            <div style={styles.settingRow}>
                                <div>
                                    <div style={styles.settingLabel}>–ù–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ –æ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–µ</div>
                                    <div style={styles.settingDesc}>–ó–∞ —Å–∫–æ–ª—å–∫–æ —á–∞—Å–æ–≤ –Ω–∞–ø–æ–º–∏–Ω–∞—Ç—å –æ –∑–∞–Ω—è—Ç–∏–∏</div>
                                </div>
                                <select
                                    className="form-select"
                                    style={{width: '120px', marginBottom: 0}}
                                    value={notificationSettings.trainingReminder}
                                    onChange={e => setNotificationSettings({...notificationSettings, trainingReminder: parseInt(e.target.value)})}
                                >
                                    <option value="1">1 —á–∞—Å</option>
                                    <option value="2">2 —á–∞—Å–∞</option>
                                    <option value="24">24 —á–∞—Å–∞</option>
                                    <option value="48">48 —á–∞—Å–æ–≤</option>
                                </select>
                            </div>
                        </div>
                    )}

                    {/* –¢–∏–ø—ã –∑–∞–Ω—è—Ç–∏–π */}
                    {activeTab === 'training-types' && (
                        <div className="card">
                            <h2 style={styles.sectionTitle}>üèãÔ∏è –¢–∏–ø—ã –∑–∞–Ω—è—Ç–∏–π</h2>
                            <p style={styles.sectionDesc}>–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≤–∏–¥–∞–º–∏ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–æ–∫</p>
                            
                            <div style={styles.typesList}>
                                {trainingTypes.map(type => (
                                    <div 
                                        key={type.id} 
                                        style={{
                                            ...styles.typeItem,
                                            opacity: type.active ? 1 : 0.5,
                                        }}
                                    >
                                        <div style={{...styles.typeColor, backgroundColor: type.color}}></div>
                                        <span style={styles.typeName}>{type.name}</span>
                                        <div style={styles.typeActions}>
                                            <button 
                                                className={`btn btn-sm ${type.active ? 'btn-outline' : 'btn-secondary'}`}
                                                onClick={() => toggleTypeActive(type.id)}
                                            >
                                                {type.active ? '–ê–∫—Ç–∏–≤–µ–Ω' : '–í—ã–∫–ª—é—á–µ–Ω'}
                                            </button>
                                            <button 
                                                className="btn btn-sm btn-danger"
                                                onClick={() => deleteType(type.id)}
                                            >
                                                üóëÔ∏è
                                            </button>
                                        </div>
                                    </div>
                                ))}
                            </div>

                            <div style={styles.addTypeForm}>
                                <input
                                    className="form-input"
                                    placeholder="–ù–∞–∑–≤–∞–Ω–∏–µ –Ω–æ–≤–æ–≥–æ —Ç–∏–ø–∞"
                                    value={newType.name}
                                    onChange={e => setNewType({...newType, name: e.target.value})}
                                    style={{flex: 1, marginBottom: 0}}
                                />
                                <input
                                    type="color"
                                    value={newType.color}
                                    onChange={e => setNewType({...newType, color: e.target.value})}
                                    style={styles.colorPicker}
                                />
                                <button 
                                    className="btn btn-primary"
                                    onClick={addTrainingType}
                                >
                                    + –î–æ–±–∞–≤–∏—Ç—å
                                </button>
                            </div>
                        </div>
                    )}

                    {/* –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å */}
                    {activeTab === 'security' && (
                        <div className="card">
                            <h2 style={styles.sectionTitle}>üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å</h2>
                            <p style={styles.sectionDesc}>–ù–∞—Å—Ç—Ä–æ–π–∫–∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ –∏ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏</p>
                            
                            <div style={styles.settingRow}>
                                <div>
                                    <div style={styles.settingLabel}>–í—Ä–µ–º—è —Å–µ—Å—Å–∏–∏ (–º–∏–Ω—É—Ç)</div>
                                    <div style={styles.settingDesc}>–ê–≤—Ç–æ–≤—ã—Ö–æ–¥ –ø–æ—Å–ª–µ –±–µ–∑–¥–µ–π—Å—Ç–≤–∏—è</div>
                                </div>
                                <select
                                    className="form-select"
                                    style={{width: '120px', marginBottom: 0}}
                                    value={securitySettings.sessionTimeout}
                                    onChange={e => setSecuritySettings({...securitySettings, sessionTimeout: parseInt(e.target.value)})}
                                >
                                    <option value="15">15 –º–∏–Ω</option>
                                    <option value="30">30 –º–∏–Ω</option>
                                    <option value="60">60 –º–∏–Ω</option>
                                    <option value="120">2 —á–∞—Å–∞</option>
                                </select>
                            </div>

                            <div style={styles.settingRow}>
                                <div>
                                    <div style={styles.settingLabel}>–î–≤—É—Ö—Ñ–∞–∫—Ç–æ—Ä–Ω–∞—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è</div>
                                    <div style={styles.settingDesc}>–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∑–∞—â–∏—Ç–∞ –∞–∫–∫–∞—É–Ω—Ç–æ–≤</div>
                                </div>
                                <label style={styles.toggle}>
                                    <input
                                        type="checkbox"
                                        checked={securitySettings.twoFactorAuth}
                                        onChange={e => setSecuritySettings({...securitySettings, twoFactorAuth: e.target.checked})}
                                    />
                                    <span style={styles.toggleSlider}></span>
                                </label>
                            </div>

                            <div style={styles.settingRow}>
                                <div>
                                    <div style={styles.settingLabel}>–ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è –¥–ª–∏–Ω–∞ –ø–∞—Ä–æ–ª—è</div>
                                    <div style={styles.settingDesc}>–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è –∫ –ø–∞—Ä–æ–ª—é –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π</div>
                                </div>
                                <select
                                    className="form-select"
                                    style={{width: '120px', marginBottom: 0}}
                                    value={securitySettings.passwordMinLength}
                                    onChange={e => setSecuritySettings({...securitySettings, passwordMinLength: parseInt(e.target.value)})}
                                >
                                    <option value="6">6 —Å–∏–º–≤–æ–ª–æ–≤</option>
                                    <option value="8">8 —Å–∏–º–≤–æ–ª–æ–≤</option>
                                    <option value="10">10 —Å–∏–º–≤–æ–ª–æ–≤</option>
                                    <option value="12">12 —Å–∏–º–≤–æ–ª–æ–≤</option>
                                </select>
                            </div>

                            <div style={styles.settingRow}>
                                <div>
                                    <div style={styles.settingLabel}>–°–ø–µ—Ü—Å–∏–º–≤–æ–ª—ã –≤ –ø–∞—Ä–æ–ª–µ</div>
                                    <div style={styles.settingDesc}>–¢—Ä–µ–±–æ–≤–∞—Ç—å !@#$% –∏ —Ç.–¥.</div>
                                </div>
                                <label style={styles.toggle}>
                                    <input
                                        type="checkbox"
                                        checked={securitySettings.requireSpecialChars}
                                        onChange={e => setSecuritySettings({...securitySettings, requireSpecialChars: e.target.checked})}
                                    />
                                    <span style={styles.toggleSlider}></span>
                                </label>
                            </div>
                        </div>
                    )}

                    {/* –û—Ç—á—ë—Ç—ã */}
                    {activeTab === 'reports' && (
                        <div className="card">
                            <h2 style={styles.sectionTitle}>üìä –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –æ—Ç—á—ë—Ç–æ–≤</h2>
                            <p style={styles.sectionDesc}>–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –∏ —Ñ–æ—Ä–º–∞—Ç –æ—Ç—á—ë—Ç–æ–≤</p>
                            
                            <div className="form-label">–§–æ—Ä–º–∞—Ç –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é</div>
                            <select
                                className="form-select"
                                value={reportSettings.defaultReportFormat}
                                onChange={e => setReportSettings({...reportSettings, defaultReportFormat: e.target.value})}
                            >
                                <option value="pdf">PDF</option>
                                <option value="excel">Excel</option>
                                <option value="csv">CSV</option>
                            </select>

                            <div style={styles.settingRow}>
                                <div>
                                    <div style={styles.settingLabel}>–ï–∂–µ–¥–Ω–µ–≤–Ω—ã–µ –æ—Ç—á—ë—Ç—ã</div>
                                    <div style={styles.settingDesc}>–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –∫–∞–∂–¥—ã–π –¥–µ–Ω—å –≤ 23:59</div>
                                </div>
                                <label style={styles.toggle}>
                                    <input
                                        type="checkbox"
                                        checked={reportSettings.autoGenerateDaily}
                                        onChange={e => setReportSettings({...reportSettings, autoGenerateDaily: e.target.checked})}
                                    />
                                    <span style={styles.toggleSlider}></span>
                                </label>
                            </div>

                            <div style={styles.settingRow}>
                                <div>
                                    <div style={styles.settingLabel}>–ï–∂–µ–Ω–µ–¥–µ–ª—å–Ω—ã–µ –æ—Ç—á—ë—Ç—ã</div>
                                    <div style={styles.settingDesc}>–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –ø–æ –≤–æ—Å–∫—Ä–µ—Å–µ–Ω—å—è–º</div>
                                </div>
                                <label style={styles.toggle}>
                                    <input
                                        type="checkbox"
                                        checked={reportSettings.autoGenerateWeekly}
                                        onChange={e => setReportSettings({...reportSettings, autoGenerateWeekly: e.target.checked})}
                                    />
                                    <span style={styles.toggleSlider}></span>
                                </label>
                            </div>

                            <div style={styles.settingRow}>
                                <div>
                                    <div style={styles.settingLabel}>–ï–∂–µ–º–µ—Å—è—á–Ω—ã–µ –æ—Ç—á—ë—Ç—ã</div>
                                    <div style={styles.settingDesc}>–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è 1 —á–∏—Å–ª–∞</div>
                                </div>
                                <label style={styles.toggle}>
                                    <input
                                        type="checkbox"
                                        checked={reportSettings.autoGenerateMonthly}
                                        onChange={e => setReportSettings({...reportSettings, autoGenerateMonthly: e.target.checked})}
                                    />
                                    <span style={styles.toggleSlider}></span>
                                </label>
                            </div>

                            <div style={styles.settingRow}>
                                <div>
                                    <div style={styles.settingLabel}>–í–∫–ª—é—á–∞—Ç—å –≥—Ä–∞—Ñ–∏–∫–∏</div>
                                    <div style={styles.settingDesc}>–î–æ–±–∞–≤–ª—è—Ç—å –¥–∏–∞–≥—Ä–∞–º–º—ã –≤ –æ—Ç—á—ë—Ç—ã</div>
                                </div>
                                <label style={styles.toggle}>
                                    <input
                                        type="checkbox"
                                        checked={reportSettings.includeCharts}
                                        onChange={e => setReportSettings({...reportSettings, includeCharts: e.target.checked})}
                                    />
                                    <span style={styles.toggleSlider}></span>
                                </label>
                            </div>
                        </div>
                    )}

                    {/* –†–µ–∑–µ—Ä–≤–Ω—ã–µ –∫–æ–ø–∏–∏ */}
                    {activeTab === 'backup' && (
                        <div className="card">
                            <h2 style={styles.sectionTitle}>üíæ –†–µ–∑–µ—Ä–≤–Ω—ã–µ –∫–æ–ø–∏–∏</h2>
                            <p style={styles.sectionDesc}>–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ä–µ–∑–µ—Ä–≤–Ω—ã–º –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ–º –¥–∞–Ω–Ω—ã—Ö</p>
                            
                            <div style={styles.backupCard}>
                                <div style={styles.backupIcon}>üì¶</div>
                                <div style={styles.backupInfo}>
                                    <div style={styles.backupTitle}>–ü–æ—Å–ª–µ–¥–Ω—è—è –∫–æ–ø–∏—è</div>
                                    <div style={styles.backupDate}>29 —è–Ω–≤–∞—Ä—è 2026, 03:00</div>
                                    <div style={styles.backupSize}>–†–∞–∑–º–µ—Ä: 45.2 MB</div>
                                </div>
                                <button className="btn btn-outline">üì• –°–∫–∞—á–∞—Ç—å</button>
                            </div>

                            <div style={styles.backupActions}>
                                <button className="btn btn-primary btn-lg">
                                    üíæ –°–æ–∑–¥–∞—Ç—å —Ä–µ–∑–µ—Ä–≤–Ω—É—é –∫–æ–ø–∏—é
                                </button>
                                <button className="btn btn-outline btn-lg">
                                    üì§ –í–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∏–∑ —Ñ–∞–π–ª–∞
                                </button>
                            </div>

                            <div style={styles.backupHistory}>
                                <h3 style={{fontSize: '16px', marginBottom: '12px'}}>–ò—Å—Ç–æ—Ä–∏—è –∫–æ–ø–∏–π</h3>
                                {[
                                    { date: '28 —è–Ω–≤–∞—Ä—è 2026', size: '44.8 MB' },
                                    { date: '27 —è–Ω–≤–∞—Ä—è 2026', size: '44.5 MB' },
                                    { date: '26 —è–Ω–≤–∞—Ä—è 2026', size: '44.1 MB' },
                                ].map((backup, i) => (
                                    <div key={i} style={styles.backupHistoryItem}>
                                        <span>üìÅ {backup.date}</span>
                                        <span style={{color: '#7f8c8d'}}>{backup.size}</span>
                                        <button className="btn btn-sm btn-outline">–°–∫–∞—á–∞—Ç—å</button>
                                    </div>
                                ))}
                            </div>
                        </div>
                    )}
                </div>
            </div>
        </div>
    );
};

const styles = {
    container: {
        padding: '10px',
    },
    header: {
        display: 'flex',
        justifyContent: 'space-between',
        alignItems: 'center',
        marginBottom: '24px',
    },
    title: {
        fontSize: '28px',
        fontWeight: '700',
        color: '#2c3e50',
        margin: 0,
    },
    subtitle: {
        fontSize: '14px',
        color: '#7f8c8d',
        margin: '4px 0 0',
    },
    layout: {
        display: 'flex',
        gap: '24px',
    },
    sidebar: {
        width: '220px',
        flexShrink: 0,
    },
    tabBtn: {
        width: '100%',
        display: 'flex',
        alignItems: 'center',
        gap: '12px',
        padding: '12px 16px',
        border: 'none',
        borderRadius: '8px',
        fontSize: '14px',
        fontWeight: '500',
        cursor: 'pointer',
        marginBottom: '4px',
        transition: 'all 0.2s',
        textAlign: 'left',
    },
    tabIcon: {
        fontSize: '18px',
    },
    content: {
        flex: 1,
    },
    sectionTitle: {
        fontSize: '20px',
        fontWeight: '600',
        color: '#2c3e50',
        marginBottom: '8px',
    },
    sectionDesc: {
        color: '#7f8c8d',
        marginBottom: '24px',
    },
    formRow: {
        display: 'flex',
        gap: '16px',
    },
    settingRow: {
        display: 'flex',
        justifyContent: 'space-between',
        alignItems: 'center',
        padding: '16px 0',
        borderBottom: '1px solid #f0f0f0',
    },
    settingLabel: {
        fontWeight: '600',
        color: '#2c3e50',
        marginBottom: '4px',
    },
    settingDesc: {
        fontSize: '13px',
        color: '#7f8c8d',
    },
    toggle: {
        position: 'relative',
        display: 'inline-block',
        width: '50px',
        height: '28px',
    },
    toggleSlider: {
        position: 'absolute',
        cursor: 'pointer',
        top: 0,
        left: 0,
        right: 0,
        bottom: 0,
        backgroundColor: '#ccc',
        borderRadius: '28px',
        transition: '0.3s',
    },
    typesList: {
        marginBottom: '20px',
    },
    typeItem: {
        display: 'flex',
        alignItems: 'center',
        gap: '12px',
        padding: '12px',
        background: '#f8f9fa',
        borderRadius: '8px',
        marginBottom: '8px',
    },
    typeColor: {
        width: '24px',
        height: '24px',
        borderRadius: '6px',
    },
    typeName: {
        flex: 1,
        fontWeight: '500',
    },
    typeActions: {
        display: 'flex',
        gap: '8px',
    },
    addTypeForm: {
        display: 'flex',
        gap: '12px',
        alignItems: 'center',
        padding: '16px',
        background: '#f8f9fa',
        borderRadius: '8px',
    },
    colorPicker: {
        width: '50px',
        height: '40px',
        border: 'none',
        borderRadius: '8px',
        cursor: 'pointer',
    },
    backupCard: {
        display: 'flex',
        alignItems: 'center',
        gap: '20px',
        padding: '20px',
        background: '#f8f9fa',
        borderRadius: '12px',
        marginBottom: '20px',
    },
    backupIcon: {
        fontSize: '40px',
    },
    backupInfo: {
        flex: 1,
    },
    backupTitle: {
        fontWeight: '600',
        marginBottom: '4px',
    },
    backupDate: {
        color: '#27ae60',
        fontSize: '14px',
    },
    backupSize: {
        color: '#7f8c8d',
        fontSize: '13px',
    },
    backupActions: {
        display: 'flex',
        gap: '12px',
        marginBottom: '24px',
    },
    backupHistory: {
        background: '#f8f9fa',
        borderRadius: '12px',
        padding: '16px',
    },
    backupHistoryItem: {
        display: 'flex',
        alignItems: 'center',
        justifyContent: 'space-between',
        padding: '12px 0',
        borderBottom: '1px solid #e0e4e8',
    },
    accessDenied: {
        display: 'flex',
        flexDirection: 'column',
        alignItems: 'center',
        justifyContent: 'center',
        height: '60vh',
        textAlign: 'center',
        color: '#7f8c8d',
    },
    accessIcon: {
        fontSize: '64px',
        marginBottom: '16px',
    },
};

// CSS –¥–ª—è toggle switch
const styleSheet = document.createElement('style');
styleSheet.textContent = `
    .toggle input {
        opacity: 0;
        width: 0;
        height: 0;
    }
    .toggle input:checked + span {
        background-color: #4169E1;
    }
    .toggle input:checked + span:before {
        transform: translateX(22px);
    }
    .toggle span:before {
        position: absolute;
        content: "";
        height: 20px;
        width: 20px;
        left: 4px;
        bottom: 4px;
        background-color: white;
        border-radius: 50%;
        transition: 0.3s;
    }
`;
document.head.appendChild(styleSheet);

export default Settings;